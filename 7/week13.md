# 内核同步

如果全局变量our_data 访问时间很短，并且访问时绝对不会入睡， 在单处理器中可以用关中断保护数据；否则必须用锁保护our_data。

## 绝对安全的变量

1. 局部变量a
2. 原子操作: atomic_t类型整数变量；原子整数操作
3. Per-CPU变量: 
   1. 高性能服务器中Per-Cpu例子: Linux SMP系统中，每个CPU一个就绪队列；readylist链表每个CPU一个，这样就省去了上锁的操作; 
   2. 访问Per-CPU变量期间禁止内核剥夺，剥夺以后切换CPU就会访问别的变量

## 锁

1. 二值锁
   1. 自旋锁: 忙等，使 用前禁止内核抢占，临界区不能入睡
   2. 信号量: 睡眠锁
2. 非二值锁

## 完成变量(内核同步)
